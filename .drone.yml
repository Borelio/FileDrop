kind: pipeline
type: docker
name: default

steps:
- name: ls
  image: alpine
  commands:
  - ls -la
  - cd ./FileDropFE
  - ls -la

- name: build-frontent-docker
  image: plugins/docker
  settings:
    registry: 
      from_secret: docker-registry
    username: 
      from_secret: docker-username
    password: 
      from_secret: docker-password
    repo: filedrop-fe
    tags: latest
    dry_run: true
    purge: true
    dockerfile: ./FileDropFE/Dockerfile
    target: linux/amd64

- name: build-backend-docker
  image: plugins/docker
  settings:
    registry: 
      from_secret: docker-registry
    username: 
      from_secret: docker-username
    password: 
      from_secret: docker-password
    repo: filedrop-be
    tags: latest
    dry_run: true
    purge: true
    context: ./FileDropBE
    target: linux/amd64